# Страничная и сегментная организация памяти.

В целом страничная и сегментная организация памяти – созданны для того, чтобы абстрагироваться от физической (плоской) памяти, процессы знают лишь о страницах или номерах сегментов.

## Сегментная
под сегментом понимается выделенная область памяти с определенным размером
каждый сегмент разделен на ячейки
запросы посылаемые к памяти содержат 2 цифры:
- номер сегмента (База сегмента – физический адрес)
- смещение внутри сегмента

Каждый сегмент определяется дескриптором сегмента, состоящим из:
- база (адрес начала сегмента в физической памяти)
- лимит – размер сегманта в байтах
- права доступа – флаги определяющие наличие сегмента в памяти, уровень защиты
В дескрипторе также может описываться какие конкретно процессы могу получать к нему доступ, таким образом реализовывается общий доступ к памяти между процессами.

Например поступает запрос на сегмент номер X с смещением Y. Известно что размер сегмента - S. Совершается проверка границ сегмента, если запрос пытается выйти за пределы сегмента к которому обращается, происходит ошибка сегментации, т.е. выход за рамки выделенной памяти для процесса. Смещение должно быть меньше чем размер сегмента.

Дескрипторная таблица агрегирует в себе множество дескрипторов сегментов.

Иногда, например в некоторых процессорах Intel, функция сегментной адресации памяти встроена в сам процессор. ОС зачастую этот функционал игнорируют. Ядро линукс в такой ситуации запрашивает один большой сегмент размером с всю память и далее самостоятельно организовывает менеджмент памяти внутри этого сегмента.

## Страничная
Страничная организация памяти во многом похожа на сегментную. В каком-то смысле страничная адресация памяти – частный случай сегментной, где каждый сегмент имеет фиксированный размер.
Размер страници выбирается кратной степени двойки, это позволяет оптимизировать работу. 
Оптимизация происходит за счет того, что требуется проверять лишь право доступа к странице. При сегментной адресации требуется проверять это, и смещение (нет ли выхода за граници).

Процесс не знает о том что используется страничная организация памяти. Например происходит обращение к странице в 16-ти битной машине:
0001|000000000000
номер страници | адрес
ОС может просто подставить номер искомой страници и получится истинный адрес страници.

0001|111111111111
0010|000000000000   процесс может "думать" что эти два адреса – последовательная сплошная адресация в памяти, но на самом деле после подстановки ос получаются совершенно разные адреса.

Вертикальная линия в данных примерах отображает разделение на номер страници и адрес, если требуется больший размер страници, то это место разделения смещается влево, оставляя меньше бит под кол-во страниц но больше места для адреса.

&nbsp;
<hr>

> [Список вопросов](Вопросы_ТПП.md)